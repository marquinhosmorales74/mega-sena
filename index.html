<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Mega-Sena – Gerador de Apostas</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f4f4;
  padding: 20px;
}

.container {
  max-width: 420px;
  margin: auto;
  text-align: center;
}

h1 { color: #2e7d32; }

input {
  width: 100%;
  padding: 10px;
  margin: 10px 0;
}

.grid {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 8px;
}

.numero {
  padding: 12px 0;
  border-radius: 8px;
  background: #ddd;
  cursor: pointer;
  font-weight: bold;
}

.numero.sel {
  background: #2e7d32;
  color: white;
}

button {
  padding: 8px 12px;
  margin: 4px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

.add { background: #1976d2; color: white; }
.auto { background: #6a1b9a; color: white; }
.pdf { background: #2e7d32; color: white; }
.del { background: #c62828; color: white; }

.apostas {
  margin-top: 15px;
  text-align: left;
}

.aposta-item {
  background: white;
  padding: 8px;
  border-radius: 6px;
  margin-bottom: 6px;
  display: flex;
  justify-content: space-between;
}

#print-area {
  position: absolute;
  left: -9999px;
  width: 210mm;
  background: white;
  padding: 20px;
}
</style>
</head>

<body>

<div class="container">
  <h1>Mega-Sena</h1>
  <input id="nome" placeholder="Nome do Apostador">
  <div class="grid" id="grid"></div>

  <button class="add" onclick="addManual()">Aposta manual</button>
  <button class="auto" onclick="auto()">Aposta automática</button>

  <div id="lista"></div>

  <button class="pdf" onclick="gerarPDF()">Gerar PDF</button>
</div>

<div id="print-area">
  <h1>Mega-Sena</h1>
  <p><b>Apostador:</b> <span id="pdf-nome"></span></p>
  <p><b>Data:</b> <span id="pdf-data"></span></p>
  <div id="pdf-apostas"></div>
</div>

<script>
const grid=document.getElementById("grid");
const lista=document.getElementById("lista");
const nome=document.getElementById("nome");

nome.value=localStorage.getItem("nome")||"";
nome.oninput=()=>localStorage.setItem("nome",nome.value);

let sel=[], apostas=JSON.parse(localStorage.getItem("apostas"))||[];

for(let i=1;i<=60;i++){
  const d=document.createElement("div");
  d.className="numero";
  d.textContent=i.toString().padStart(2,"0");
  d.onclick=()=>toggle(d,i);
  grid.appendChild(d);
}

function toggle(el,n){
  if(sel.includes(n)){sel=sel.filter(x=>x!==n);el.classList.remove("sel");}
  else if(sel.length<6){sel.push(n);el.classList.add("sel");}
}

function addManual(){
  if(sel.length!==6)return alert("Escolha 6 dezenas");
  apostas.push([...sel].sort((a,b)=>a-b));sel=[];save();
}

function auto(){
  const n=[];
  while(n.length<6){
    const r=Math.floor(Math.random()*60)+1;
    if(!n.includes(r))n.push(r);
  }
  apostas.push(n.sort((a,b)=>a-b));save();
}

function save(){
  localStorage.setItem("apostas",JSON.stringify(apostas));
  render();
}

function render(){
  lista.innerHTML="";
  apostas.forEach((a,i)=>{
    lista.innerHTML+=`
      <div class="aposta-item">
        <div><b>Aposta ${i+1}:</b> ${a.join(" - ")}</div>
        <button class="del" onclick="apostas.splice(${i},1);save()">X</button>
      </div>`;
  });
}

function gerarPDF(){
  document.getElementById("pdf-nome").textContent=nome.value||"-";
  document.getElementById("pdf-data").textContent=new Date().toLocaleDateString("pt-BR");
  document.getElementById("pdf-apostas").innerHTML=
    apostas.map((a,i)=>`<p><b>Aposta ${i+1}:</b> ${a.join(" - ")}</p>`).join("");

  const file=(nome.value||"apostador").replace(/\s+/g,"_").toLowerCase();

  html2pdf().set({
    filename:`mega-sena_${file}.pdf`,
    html2canvas:{scale:2},
    jsPDF:{format:'a4'}
  }).from(document.getElementById("print-area")).save();
}

render();
</script>

</body>
</html>
